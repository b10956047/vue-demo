"use strict";(globalThis["webpackChunkagricultural_tractor"]=globalThis["webpackChunkagricultural_tractor"]||[]).push([[587],{6587:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var l=t(1758),i=t(8790);const n={class:"q-pa-md"},o={id:"panel1",style:{display:"block"}},d={class:"row justify-center q-mt-md"},r={class:"text-h5 card-text"},s={class:"row items-center justify-end"},p={class:"row items-center justify-end"},m={class:"row items-center justify-end"},u={class:"text-h5 card-text"},_={class:"row items-center justify-end"},g={class:"row items-center justify-end"},c={class:"row items-center justify-end"},h={class:"text-h5 card-text"},b={class:"card-text"};function y(e,a,t,y,f,w){const k=(0,l.g2)("q-btn"),x=(0,l.g2)("q-td"),V=(0,l.g2)("q-table"),F=(0,l.g2)("q-pagination"),R=(0,l.g2)("q-card-section"),v=(0,l.g2)("q-input"),C=(0,l.g2)("q-date"),U=(0,l.g2)("q-popup-proxy"),A=(0,l.g2)("q-icon"),q=(0,l.g2)("q-card-actions"),D=(0,l.g2)("q-card"),L=(0,l.g2)("q-dialog"),Q=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",n,[(0,l.Lk)("div",o,[(0,l.bF)(k,{label:"新增考試",color:"blue",onClick:w.add,style:{"margin-bottom":"10px"}},null,8,["onClick"]),(0,l.bF)(V,{class:"my-table",rows:f.rows,columns:f.columns,"row-key":"name",pagination:f.pagination,"onUpdate:pagination":a[0]||(a[0]=e=>f.pagination=e),"hide-pagination":"",separator:"cell"},{"body-cell-action":(0,l.k6)((e=>[(0,l.bF)(x,{props:e},{default:(0,l.k6)((()=>[(0,l.bF)(k,{icon:"edit",flat:"",dense:"",round:"",onClick:a=>w.editRow(e.row)},null,8,["onClick"]),(0,l.bF)(k,{icon:"delete",flat:"",dense:"",round:"",onClick:a=>w.deleteRow(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination"]),(0,l.Lk)("div",d,[(0,l.bF)(F,{modelValue:f.pagination.page,"onUpdate:modelValue":a[1]||(a[1]=e=>f.pagination.page=e),color:"blue-5",max:w.pagesNumber,size:"sm","max-pages":5,"boundary-numbers":!1},null,8,["modelValue","max"])])])]),(0,l.bF)(L,{modelValue:f.Add,"onUpdate:modelValue":a[8]||(a[8]=e=>f.Add=e)},{default:(0,l.k6)((()=>[(0,l.bF)(D,null,{default:(0,l.k6)((()=>[(0,l.bF)(R,null,{default:(0,l.k6)((()=>[(0,l.bF)(R,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",r,(0,i.v_)(f.title),1)])),_:1}),(0,l.bF)(R,null,{default:(0,l.k6)((()=>[(0,l.bF)(v,{filled:"",modelValue:f.add_row.ladder,"onUpdate:modelValue":a[2]||(a[2]=e=>f.add_row.ladder=e),label:"場次"},null,8,["modelValue"]),(0,l.bF)(v,{filled:"",modelValue:f.add_row.training,"onUpdate:modelValue":a[4]||(a[4]=e=>f.add_row.training=e),label:"訓練時間",style:{"margin-top":"10px"}},{append:(0,l.k6)((()=>[(0,l.bF)(A,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(U,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{modelValue:f.trainingRange,"onUpdate:modelValue":[a[3]||(a[3]=e=>f.trainingRange=e),w.add_update_training],range:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",s,[(0,l.bo)((0,l.bF)(k,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(v,{filled:"",modelValue:f.add_row.apply,"onUpdate:modelValue":a[6]||(a[6]=e=>f.add_row.apply=e),label:"報名時間",style:{"margin-top":"10px"}},{append:(0,l.k6)((()=>[(0,l.bF)(A,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(U,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{modelValue:f.applyRange,"onUpdate:modelValue":[a[5]||(a[5]=e=>f.applyRange=e),w.add_update_apply],range:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",p,[(0,l.bo)((0,l.bF)(k,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(v,{filled:"",modelValue:f.add_row.exam_num,"onUpdate:modelValue":[a[7]||(a[7]=e=>f.add_row.exam_num=e),w.generateExamFields],label:"考試場數",type:"number",style:{"margin-top":"10px","margin-bottom":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(f.add_row.exams,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a},[(0,l.Lk)("div",null,[(0,l.Lk)("p",null,"第"+(0,i.v_)(a+1)+"場：",1),(0,l.bF)(v,{filled:"",modelValue:e.type,"onUpdate:modelValue":a=>e.type=a,label:"考試種類"},null,8,["modelValue","onUpdate:modelValue"])]),(0,l.bF)(v,{class:"margin",filled:"",modelValue:e.time,"onUpdate:modelValue":a=>e.time=a,label:"考試時間",style:{"margin-bottom":"10px"}},{append:(0,l.k6)((()=>[(0,l.bF)(A,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(U,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{modelValue:e.time,"onUpdate:modelValue":a=>e.time=a},{default:(0,l.k6)((()=>[(0,l.Lk)("div",m,[(0,l.bo)((0,l.bF)(k,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])))),128))])),_:1})])),_:1}),(0,l.bF)(q,{align:"center"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(k,{flat:"",label:"取消",color:"primary",onClick:w.cancel},null,8,["onClick"]),[[Q]]),(0,l.bo)((0,l.bF)(k,{flat:"",label:"確定",color:"primary",onClick:w.add_yes},null,8,["onClick"]),[[Q]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(L,{modelValue:f.Edit,"onUpdate:modelValue":a[17]||(a[17]=e=>f.Edit=e)},{default:(0,l.k6)((()=>[(0,l.bF)(D,null,{default:(0,l.k6)((()=>[(0,l.bF)(R,null,{default:(0,l.k6)((()=>[(0,l.bF)(R,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",u,(0,i.v_)(f.title),1)])),_:1}),(0,l.bF)(R,null,{default:(0,l.k6)((()=>[(0,l.bF)(v,{filled:"",modelValue:f.edit_row.ladder,"onUpdate:modelValue":a[9]||(a[9]=e=>f.edit_row.ladder=e),label:"場次",readonly:""},null,8,["modelValue"]),(0,l.bF)(v,{filled:"",modelValue:f.edit_row.training,"onUpdate:modelValue":a[11]||(a[11]=e=>f.edit_row.training=e),label:"訓練時間",style:{"margin-top":"10px"}},{append:(0,l.k6)((()=>[(0,l.bF)(A,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(U,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{modelValue:f.trainingRange,"onUpdate:modelValue":[a[10]||(a[10]=e=>f.trainingRange=e),w.edit_update_training],range:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",_,[(0,l.bo)((0,l.bF)(k,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(v,{filled:"",modelValue:f.edit_row.apply,"onUpdate:modelValue":a[13]||(a[13]=e=>f.edit_row.apply=e),label:"報名時間",style:{"margin-top":"10px"}},{append:(0,l.k6)((()=>[(0,l.bF)(A,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(U,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{modelValue:f.applyRange,"onUpdate:modelValue":[a[12]||(a[12]=e=>f.applyRange=e),w.edit_update_apply],range:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",g,[(0,l.bo)((0,l.bF)(k,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(v,{filled:"",modelValue:f.edit_row.exam_time,"onUpdate:modelValue":a[15]||(a[15]=e=>f.edit_row.exam_time=e),label:"考試時間",style:{"margin-top":"10px"}},{append:(0,l.k6)((()=>[(0,l.bF)(A,{name:"event",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(U,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{modelValue:f.edit_row.exam_time,"onUpdate:modelValue":a[14]||(a[14]=e=>f.edit_row.exam_time=e)},{default:(0,l.k6)((()=>[(0,l.Lk)("div",c,[(0,l.bo)((0,l.bF)(k,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(v,{filled:"",modelValue:f.edit_row.exam_type,"onUpdate:modelValue":a[16]||(a[16]=e=>f.edit_row.exam_type=e),label:"考試種類",style:{"margin-top":"10px"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.bF)(q,{align:"center"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(k,{flat:"",label:"取消",color:"primary",onClick:w.cancel},null,8,["onClick"]),[[Q]]),(0,l.bo)((0,l.bF)(k,{flat:"",label:"確定",color:"primary",onClick:w.edit_yes},null,8,["onClick"]),[[Q]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(L,{modelValue:f.Delete,"onUpdate:modelValue":a[18]||(a[18]=e=>f.Delete=e)},{default:(0,l.k6)((()=>[(0,l.bF)(D,null,{default:(0,l.k6)((()=>[(0,l.bF)(R,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",h,(0,i.v_)(f.title),1)])),_:1}),(0,l.bF)(R,{class:"q-pt-none card card-text"},{default:(0,l.k6)((()=>[(0,l.Lk)("pre",b,(0,i.v_)(f.hint),1)])),_:1}),(0,l.bF)(q,{align:"right"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(k,{flat:"",label:"確定",color:"primary",onClick:w.cancel_yes},null,8,["onClick"]),[[Q]]),(0,l.bo)((0,l.bF)(k,{flat:"",label:"關閉",color:"primary"},null,512),[[Q]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}t(239);const f={components:{},data(){return{title:"",pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:4},columns:[{name:"action",label:"操作",align:"center"},{name:"ladder",required:!0,label:"場次",align:"left",field:"ladder",sortable:!0},{name:"training_date",align:"left",label:"教育訓練時間",field:"training_date",sortable:!0},{name:"training_num",align:"left",label:"訓練人數",field:"training_num",sortable:!0},{name:"apply_date",align:"left",label:"報名時間",field:"apply_date",sortable:!0},{name:"apply_num",align:"left",label:"報名人數",field:"apply_num"},{name:"exam_date",align:"left",label:"考試時間",field:"exam_date",sortable:!0},{name:"exam_type",align:"left",label:"考試種類",field:"exam_type",sortable:!0}],rows:[{no:"4",ladder:"003",training_date:"113/11/01~113/11/20",training_num:"0/400",apply_date:"113/11/21~113/11/25",apply_num:"0/40",exam_date:"113/12/12",exam_type:"小"},{no:"3",ladder:"003",training_date:"113/11/01~113/11/20",training_num:"0/400",apply_date:"113/11/21~113/11/25",apply_num:"5/40",exam_date:"113/12/11",exam_type:"大"},{no:"2",ladder:"002",training_date:"113/10/01~113/10/20",training_num:"360/400",apply_date:"113/10/21~113/10/25",apply_num:"36/40",exam_date:"113/11/11",exam_type:"小"},{no:"1",ladder:"001",training_date:"113/09/01~113/09/20",training_num:"380/400",apply_date:"113/09/21~113/09/25",apply_num:"40/40",exam_date:"113/10/11",exam_type:"小"}],delete_info:"",edit_info:"",hint:"",Add:!1,Delete:!1,Edit:!1,add_row:{ladder:"",training:"",apply:"",exam_num:0,exams:[]},edit_row:{no:"",ladder:"",training:"",apply:"",exam_time:"",exam_type:""},trainingRange:{from:null,to:null},applyRange:{from:null,to:null}}},computed:{pagesNumber(){return Math.ceil(this.rows.length/this.pagination.rowsPerPage)}},methods:{deleteRow(e){this.delete_info=e,this.title="刪除",this.hint="確定要刪除嗎?",this.Delete=!0},cancel_yes(){for(let e=0;e<this.rows.length;e++)this.rows[e].no==this.delete_info.no&&this.rows.splice(e,1);this.$q.notify({color:"green",textColor:"white",icon:"check_circle",message:"已刪除教育訓練及考試資訊",position:"top"})},editRow(e){this.edit_info=e,this.title="更新",this.Edit=!0,this.edit_row.no=e.no,this.edit_row.ladder=e.ladder,this.edit_row.training=e.training_date,this.edit_row.apply=e.apply_date,this.edit_row.exam_time=e.exam_date,this.edit_row.exam_type=e.exam_type},edit_yes(){for(let e=0;e<this.rows.length;e++)this.rows[e].no==this.edit_row.no&&(this.rows[e].ladder=this.edit_row.ladder,this.rows[e].training_date=this.edit_row.training,this.rows[e].apply_date=this.edit_row.apply,this.rows[e].exam_date=this.edit_row.exam_time,this.rows[e].exam_type=this.edit_row.exam_type);this.edit_row.no="",this.edit_row.ladder="",this.edit_row.training="",this.edit_row.apply="",this.edit_row.exam_time="",this.edit_row.exam_type="",this.trainingRange.from="",this.trainingRange.to="",this.applyRange.from="",this.applyRange.to=""},add(){this.title="新增",this.Add=!0},add_yes(){for(let e=4;e<this.add_row.exam_num+4;e++){let a={no:e,ladder:this.add_row.ladder,training_num:"0/400",training_date:this.add_row.training,apply_date:this.add_row.apply,apply_num:"0/40",exam_date:this.add_row.exams[e-4].time,exam_type:this.add_row.exams[e-4].type};this.rows.push(a)}},cancel(){this.add_row.ladder="",this.add_row.training_start="",this.add_row.training_end="",this.add_row.apply_start="",this.add_row.apply_end="",this.add_row.exam_num=0,this.add_row.exams=[],this.edit_row.no="",this.edit_row.ladder="",this.edit_row.training="",this.edit_row.apply="",this.edit_row.exam_time="",this.edit_row.exam_type="",this.trainingRange.from="",this.trainingRange.to="",this.applyRange.from="",this.applyRange.to=""},generateExamFields(){const e=parseInt(this.add_row.exam_num)||0;if(e>0){const a=this.add_row.exams.length;a!==e&&(this.add_row.exams=Array.from({length:e},(()=>({type:"",time:""}))))}else this.add_row.exams=[]},edit_update_training(){const e=this.trainingRange.from?this.formatDate(this.trainingRange.from):"",a=this.trainingRange.to?this.formatDate(this.trainingRange.to):"";this.edit_row.training=e&&a?`${e}~${a}`:e||a},edit_update_apply(){const e=this.applyRange.from?this.formatDate(this.applyRange.from):"",a=this.applyRange.to?this.formatDate(this.applyRange.to):"";this.edit_row.apply=e&&a?`${e}~${a}`:e||a},add_update_apply(){const e=this.applyRange.from?this.formatDate(this.applyRange.from):"",a=this.applyRange.to?this.formatDate(this.applyRange.to):"";this.add_row.apply=e&&a?`${e}~${a}`:e||a},add_update_training(){const e=this.trainingRange.from?this.formatDate(this.trainingRange.from):"",a=this.trainingRange.to?this.formatDate(this.trainingRange.to):"";this.add_row.training=e&&a?`${e}~${a}`:e||a},formatDate(e){const a=new Date(e);return`${a.getFullYear()-1911}/${(a.getMonth()+1).toString().padStart(2,"0")}/${a.getDate().toString().padStart(2,"0")}`}}};var w=t(2807),k=t(6384),x=t(4092),V=t(5262),F=t(4700),R=t(2156),v=t(3316),C=t(4189),U=t(7837),A=t(492),q=t(8975),D=t(4581),L=t(2669),Q=t(8672),$=t(8582),E=t.n($);const P=(0,w.A)(f,[["render",y]]),j=P;E()(f,"components",{QBtn:k.A,QTable:x.A,QTd:V.A,QPagination:F.A,QDialog:R.A,QCard:v.A,QCardSection:C.A,QInput:U.A,QIcon:A.A,QPopupProxy:q.A,QDate:D.A,QCardActions:L.A}),E()(f,"directives",{ClosePopup:Q.A})}}]);